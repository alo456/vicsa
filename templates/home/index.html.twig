{% extends 'base.html.twig' %}

{% block stylesheets %}
    <style>
        td{
            background-color:#dc3545;
        }
    </style>
{% endblock %}


{% block body %}
    {% embed 'menu.html.twig' %}
        {% block content %}          

            <div style="width:100%;">
                <canvas id="canvas"></canvas>
            </div>
            <br>
            </br>
            <h3 style="text-align: center;">NOTAS PENDIENTES</h3>
            <br>
            </br>
            <table id="dtBasicExample" class="table"  cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th class="th-sm">Línea
                            <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Descripción
                            <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Precio
                            <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Contrato
                            <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Nombre del Plan
                            <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Activación
                            <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for key, pend in pends %}
                        <tr>
                            <td> {{key}} </td>
                            <td> {{pend[0]}} </td>
                            <td> {{pend[1]}} </td>
                            <td> {{pend[2]}} </td>
                            <td> {{pend[3]}} </td>
                            <td> {{pend[4]}} </td>       
                        </tr>   
                    {% endfor %}
                </tbody>

            </table>

        {% endblock %}
    {% endembed %}
{% endblock %}



{% block javascripts %}
    <script>
        var lineChartData = {
            labels: ['LUNES', 'MARTES', 'MIERCOLES', 'JUEVES', 'VIERNES', 'SABADO', 'DOMINGO'],
            datasets: [{
                    label: 'VENTAS',
                    borderColor: window.chartColors.red,
                    backgroundColor: window.chartColors.red,
                    fill: false,
                    data: [
        {{ sales[1] }},
        {{ sales[2] }},
        {{ sales[3] }},
        {{ sales[4] }},
        {{ sales[5] }},
        {{ sales[6] }},
        {{ sales[7] }}
                        ],
                        yAxisID: 'y-axis-1',
                    }, {
                        label: 'COMPRAS ALMACEN',
                        borderColor: window.chartColors.blue,
                        backgroundColor: window.chartColors.blue,
                        fill: false,
                        data: [
        {{ purchases[1] }},
        {{ purchases[2] }},
        {{ purchases[3] }},
        {{ purchases[4] }},
        {{ purchases[5] }},
        {{ purchases[6] }},
        {{ purchases[7] }}
                        ],
                        yAxisID: 'y-axis-2'
                    }]
            };

            window.onload = function () {
                var ctx = document.getElementById('canvas').getContext('2d');
                window.myLine = Chart.Line(ctx, {
                    data: lineChartData,
                    options: {
                        responsive: true,
                        hoverMode: 'index',
                        stacked: false,
                        title: {
                            display: true,
                            text: 'REPORTE SEMANAL VICSA'
                        },
                        scales: {
                            yAxes: [{
                                    type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                                    display: true,
                                    position: 'left',
                                    id: 'y-axis-1',
                                }, {
                                    type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                                    display: true,
                                    position: 'right',
                                    id: 'y-axis-2',

                                    // grid line settings
                                    gridLines: {
                                        drawOnChartArea: false, // only want the grid lines for one axis to show up
                                    },
                                }],
                        }
                    }
                });
            };

            document.getElementById('randomizeData').addEventListener('click', function () {
                lineChartData.datasets.forEach(function (dataset) {
                    dataset.data = dataset.data.map(function () {
                        return randomScalingFactor();
                    });
                });

                window.myLine.update();
            });
    </script>


    <script>

        $(document).ready(function () {
            $('#dtBasicExample')
                    .addClass('nowrap')
                    .dataTable({
                        responsive: true,
                        columnDefs: [
                            {targets: [-1, -3], className: 'dt-body-right'}
                        ]
                    });
        });
    </script>

{% endblock %}

